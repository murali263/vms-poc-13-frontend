<div class="container mt-5">
    <mat-tab-group mat-align-tabs="start" class="bg-white example-stretched-tabs mat-elevation-z4"
        [selectedIndex]="selectedTab" (selectedIndexChange)="tabChange($event)" style="margin-top: 9em;">
        <mat-tab label="Visitor Pass List">
            <div class="container ">
                <div class="row" *ngIf="(tableData?.length != 0)">
                    <mat-form-field class="searchMethod" class=" ml-2 d-flex justify-content-end">
                        <img matPrefix imgSrc="Web/search.png" style="height: 17px;padding-right: 1em;" />
                        <input matInput (keyup)="applyFilter($event)" placeholder="Search by visitor name" #input>
                        <mat-icon *ngIf="searchedText==''" class="material-icons searchicon" matSuffix>
                            search
                        </mat-icon>
                        <mat-icon *ngIf="searchedText!=''" matSuffix (click)="clear()">clear</mat-icon>
                    </mat-form-field>
                    <mat-form-field appearance="fill" color="primary">
                        <mat-label>Visitor Type </mat-label>
                        <mat-select (selectionChange)="changecolom($event.value)">
                            <mat-option *ngFor="let data of visittype" [value]="data.visitorstype" >{{data.visitorstype}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="col-md-12 p-0">
                        <div class=" mat-elevation-z8">
                            <table  matSort mat-table
                                recycleRows [dataSource]="companyArr">
                                <!-- Name  -->
                                    <ng-container matColumnDef="Visitor Name">
                                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                                        <td mat-cell *matCellDef="let element" class="text-center"> 
                                            <span *ngIf="element?.visitor_name">
                                                {{element?.visitor_name}}
                                            </span>
                                          
                                        </td>
                                    </ng-container>
                                
                             



                                <!-- mobile -->
                                <ng-container matColumnDef="Phone Number">
                                    <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                                    <td mat-cell *matCellDef="let element" class="text-center">+91 {{element.mobile}}
                                    </td>
                                </ng-container>
                                <!-- vehicle_number -->
                                <ng-container matColumnDef="Vehicle Number">
                                    <th mat-header-cell *matHeaderCellDef> Vehicle Number </th>
                                    <td mat-cell *matCellDef="let element" class="text-center"
                                        style="text-transform: uppercase;">
                                        {{element.vehicle_number}} </td>
                                </ng-container>
                                <!-- vehicle_date -->

                                <ng-container matColumnDef="Visit Date">
                                    <th mat-header-cell *matHeaderCellDef> Visit Date </th>
                                    <td mat-cell *matCellDef="let element" class="text-center"
                                        style="text-transform: uppercase;">
                                        {{element.visit_date | date: 'd-MMM-y'}} </td>
                                </ng-container>
                                <ng-container matColumnDef="Visit Time">
                                    <th mat-header-cell *matHeaderCellDef> Visit Time </th>
                                    <td mat-cell *matCellDef="let element" class="text-center"
                                        style="text-transform: uppercase;">
                                        {{element.visit_time}} </td>
                                </ng-container>
                                <!-- visiting_to -->
                                <ng-container matColumnDef="Visit To">
                                    <th mat-header-cell *matHeaderCellDef> Visit To </th>
                                    <td mat-cell *matCellDef="let element" class="text-center"> 
                                        <span *ngIf="element?.refer_to">{{element.refer_to}}
                                        </span>
                                        <span *ngIf="!element?.refer_to">
                                            -
                                        </span>  
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="CompanyName">
                                    <th mat-header-cell *matHeaderCellDef>CompanyName </th>
                                    <td mat-cell *matCellDef="let element" class="text-center"> 
                                      
                                        <span *ngIf="element?.CompanyName">{{element.CompanyName}}
                                        </span>
                                        <span *ngIf="!element?.CompanyName">-
                                        </span>
                                      
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="Role">
                                    <th mat-header-cell *matHeaderCellDef>Role</th>
                                    <td mat-cell *matCellDef="let element" class="text-center"> 
                                        <span *ngIf="element?.Role">{{element.Role}}
                                        </span>
                                        <span *ngIf="!element?.Role">-
                                        </span>
                                      
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="Refer To">
                                    <th mat-header-cell *matHeaderCellDef>Refer To </th>
                                    <td mat-cell *matCellDef="let element" class="text-center"> 
                                        <span *ngIf="element?.refer_to">{{element.refer_to}}
                                        </span>
                                        <span *ngIf="!element?.refer_to">
                                            -
                                        </span>  
                                    </td>
                                </ng-container>
                                <!-- visiting_from -->
                                <ng-container matColumnDef="Visit From">
                                    <th mat-header-cell *matHeaderCellDef> Visit From </th>
                                    <td mat-cell *matCellDef="let element" class="text-center">
                                        

                                        <span *ngIf="element?.visiting_from">
                                            {{element.visiting_from}} 
                                        </span>
                                        <span *ngIf="!element?.visiting_from">
                                         - 
                                        </span>

                                    </td>
                                </ng-container>
                                <!-- members -->
                                <ng-container matColumnDef="Members">
                                    <th mat-header-cell *matHeaderCellDef> Members </th>
                                    <td mat-cell *matCellDef="let element" class="text-center">
                                        <span *ngIf="element?.memberscount">
                                            {{element?.memberscount}}
                                        </span>
                                        <span style="text-align: left;" *ngIf="!element?.memberscount"><p class="mb-0" *ngFor="let member of element.members">
                                            <mat-icon style="font-size:9px;width: 10px;height: 0px;">fiber_manual_record</mat-icon>{{member?.membername}}</p>
                                            
                                        </span>
                                        
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="ToDate">
                                    <th mat-header-cell *matHeaderCellDef> ToDate </th>
                                    <td mat-cell *matCellDef="let element" class="text-center">
                                        <span *ngIf="element?.ToDate">
                                            {{element?.ToDate | date: 'd-MMM-y'}}
                                        </span>
                                        <span *ngIf="!element?.ToDate">
                                            -
                                        </span> 
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="FromDate">
                                    <th mat-header-cell *matHeaderCellDef> FromDate </th>
                                    <td mat-cell *matCellDef="let element" class="text-center">
                                        <span *ngIf="element?.FromDate">
                                            {{element?.FromDate | date: 'd-MMM-y'}}
                                        </span>
                                        <span *ngIf="!element?.FromDate">
                                            -
                                        </span> 
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="EventType">
                                    <th mat-header-cell *matHeaderCellDef> Event Type </th>
                                    <td mat-cell *matCellDef="let element" class="text-center">
                                        <span *ngIf="element?.EventType">
                                            {{element?.EventType}}
                                        </span>
                                        <span *ngIf="!element?.EventType">
                                            -
                                        </span> 
                                    </td>
                                </ng-container>
                                <!-- Visittype Required -->
                                <ng-container matColumnDef="Visit Type">
                                    <th mat-header-cell *matHeaderCellDef> Visit Type </th>
                                    <td mat-cell *matCellDef="let element" class="text-center">
                                        
                                        {{element.visitType}} 
                                     
                                    </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                            </table>
                            <mat-paginator [pageSizeOptions]="[5, 10, 25, 50, 100]" [pageSize]="5" showFirstLastButtons>
                            </mat-paginator>
                        </div>
                    </div>
                </div>
                <div *ngIf="!(tableData?.length &gt;0)" style="text-align: center; padding: 31px;">
                    <div style="text-align: center;font-size:20px"><b> NO RESULTS FOUND</b></div>
                    <img style="padding: 31px;" src="../../../assets/images/nodata.png ">
                </div>
            </div>
        </mat-tab>
        <mat-tab label="Create Visitor Pass">
            <div class="container ">
                <div class="row">


                    <form [formGroup]="visitorform" (ngSubmit)="visitorinsert()">
                        
                        <br>
                        <br>
                        <mat-radio-group aria-label="Select an option" formControlName="visitType">
                            <mat-radio-button value="GeneralVisitor" (click)="memberradio(0)">Visitor
                            </mat-radio-button>
                            &nbsp;&nbsp;&nbsp;
                            <mat-radio-button value="Vendor" (click)="memberradio(1)">Vendor
                            </mat-radio-button>
                            &nbsp;&nbsp;&nbsp;
                            <mat-radio-button value="Organizer" (click)="memberradio(2)">Event Organisers
                            </mat-radio-button>
                            &nbsp;&nbsp;&nbsp;
                            <mat-radio-button value="Laborer" (click)="memberradio(3)">Labourer
                            </mat-radio-button>
                        </mat-radio-group>
                        <br>
                        <br>
                        <!-- vendor pass creation  -->
                        <ng-container *ngIf="shown">
                            <mat-grid-list cols="2" rowHeight="470px">
                                <mat-grid-tile>
                                    <div class="bothsidewith">

                                        <!-- visitorname -->
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Visitor Name </mat-label>
                                            <input matInput formControlName="visitor_name"
                                                (keypress)="letterOnly($event)">
                                            <mat-icon matPrefix>account_circle</mat-icon>
                                            <mat-error *ngIf="visitorform.controls['visitor_name'].invalid ">
                                                <div *ngIf="visitorform.controls['visitor_name'].errors?.required">
                                                    Visitor name is required
                                                </div>
                                                <div *ngIf="visitorform.controls['visitor_name'].errors?.pattern">
                                                    {{characterspattern}}
                                                </div>
                                            </mat-error>
                                        </mat-form-field>

                                        <!-- mobile -->
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Phone Number </mat-label>
                                            <input matInput type="number" maxlength="10" formControlName="mobile">
                                            <span matPrefix>+91 </span>
                                            <br>
                                            <mat-error *ngIf="visitorform.controls['mobile'].invalid ">
                                                <div *ngIf="visitorform.controls['mobile'].errors?.required">
                                                    Phone Number is required
                                                </div>
                                                <div *ngIf="visitorform.controls['mobile'].errors?.pattern">
                                                    Phone Number is invalid
                                                </div>
                                            </mat-error>
                                        </mat-form-field>

                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label> Members </mat-label>

                                            <input matInput type="number" formControlName="memberscount">

                                            <mat-icon matPrefix>account_box</mat-icon>
                                            <mat-error *ngIf="visitorform.controls['memberscount'].invalid ">
                                                <div *ngIf="visitorform.controls['memberscount'].errors?.required">
                                                    Members is required
                                                </div>

                                            </mat-error>
                                        </mat-form-field>
                                        <!--visit date-->
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Visit Date</mat-label>
                                            <input matInput [matDatepicker]="picker" [min]="minDate"
                                                (click)="picker.open()" formControlName="visit_date">
                                            <mat-datepicker-toggle matPrefix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker></mat-datepicker>
                                        </mat-form-field>

                                        <!--visit time-->

                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Visit Time</mat-label>
                                            <input matInput [ngxTimepicker]="toggleTimepicker1" [format]="12"
                                                [min]="currentTime" (ngModelChange)="selectInTime($event)"
                                                formControlName="visit_time" required>
                                            <mat-icon matSuffix>
                                                <ngx-material-timepicker-toggle [for]="toggleTimepicker1">
                                                </ngx-material-timepicker-toggle>
                                                <ngx-material-timepicker #toggleTimepicker1></ngx-material-timepicker>
                                            </mat-icon>
                                        </mat-form-field>
                                    </div>
                                </mat-grid-tile>
                                <mat-grid-tile>
                                    <div class="bothsidewithright">
                                        <!-- Vehicle Number-->
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Vehicle Number</mat-label>
                                            <input matInput formControlName="vehicle_number" maxlength="10"
                                                style="text-transform: uppercase;">
                                            <mat-icon matPrefix> directions_car</mat-icon>
                                        </mat-form-field>
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Referral Name </mat-label>
                                            <mat-select formControlName="refer_to">
                                                <mat-option *ngFor="let data of referralname" [value]="data.referValue">
                                                    {{data.referValue}}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <!-- Visiting From -->
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Visiting From</mat-label>
                                            <input matInput formControlName="visiting_from">
                                            <mat-icon matPrefix>call_received</mat-icon>
                                            <mat-error *ngIf="visitorform.controls['visiting_from'].invalid ">
                                                <div *ngIf="visitorform.controls['visiting_from'].errors?.required">
                                                    Visiting from is required
                                                </div>
                                            </mat-error>
                                        </mat-form-field>
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label>Description</mat-label>
                                            <textarea matInput formControlName="Comment" cdkTextareaAutosize
                                                cdkAutosizeMinRows="2" cdkAutosizeMaxRows="5">
                                        </textarea>
                                        <mat-error *ngIf="visitorform.controls['Comment'].invalid ">
                                            <div *ngIf="visitorform.controls['Comment'].errors?.required">
                                                Visiting from is required
                                            </div>
                                        </mat-error>
                                        </mat-form-field>
                                        
                                    </div>
                                </mat-grid-tile>
                            </mat-grid-list>
                            
                            <div>
                                <button mat-raised-button color="primary" (click)="checkPermissions()"><mat-icon>add_a_photo</mat-icon></button>
                                <p *ngIf="status">Status here: {{status}}</p>
                            </div>
                            <div *ngIf="stream">
                                <!-- web cam image will be shown here -->
                                <webcam [height]="200" 
                                [width]="250" [trigger]="$trigger" (imageCapture)="snapshot($event)" [imageQuality]="1"></webcam>
                                <button mat-raised-button color="primary" (click)="captureImage()" >{{btnLabel}}</button>
                           </div>
                           <div *ngIf="previewImage">
                            <img [src]="previewImage" formControlName="files" height="200" width="250"><br>
                            <!-- <button mat-raised-button color="primary" (click)="proceed()">Proceed</button> -->
                        </div>
                            <div>
                                <button mat-raised-button class="buttonRow" type="submit">Submit</button>
                            </div>
                        </ng-container>


<!-- vendorpass creation -->

<ng-container *ngIf="show">
    <mat-grid-list cols="2" rowHeight="470px">
        <mat-grid-tile>
            <div class="bothsidewith">
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Contact Person </mat-label>
                    <input matInput formControlName="visitor_name"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['visitor_name'].invalid ">
                        <div *ngIf="visitorform.controls['visitor_name'].errors?.required">
                            Contact Person Name Is Required
                        </div>
                        <div *ngIf="visitorform.controls['visitor_name'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Company Name </mat-label>
                    <input matInput formControlName="CompanyName"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['CompanyName'].invalid ">
                        <div *ngIf="visitorform.controls['CompanyName'].errors?.required">
                            Company Name Is Required
                        </div>
                        <div *ngIf="visitorform.controls['CompanyName'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label> Members </mat-label>
                    <input matInput type="number" formControlName="memberscount">
                    <mat-icon matPrefix>account_box</mat-icon>
                    <mat-error *ngIf="visitorform.controls['memberscount'].invalid ">
                        <div *ngIf="visitorform.controls['memberscount'].errors?.required">
                            Members is required
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Phone Number </mat-label>
                    <input matInput type="number" formControlName="mobile" maxlength="10">
                    <span matPrefix>+91 </span>
                    <br>
                    <mat-error *ngIf="visitorform.controls['mobile'].invalid ">
                        <div *ngIf="visitorform.controls['mobile'].errors?.required">
                            Phone Number is required
                        </div>
                        <div *ngIf="visitorform.controls['mobile'].errors?.pattern">
                            Phone Number is invalid
                        </div>
                    </mat-error>
                </mat-form-field>
                   <!--visit date-->
                   <mat-form-field appearance="fill" color="primary">
                    <mat-label>Visit Date</mat-label>
                    <input matInput [matDatepicker]="picker" [min]="minDate"
                        (click)="picker.open()" formControlName="visit_date">
                    <mat-datepicker-toggle matPrefix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </div>
        </mat-grid-tile>
        <mat-grid-tile>
            <div class="visitorbothsidewithright">
                <!-- Vehicle Number-->
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Vehicle Number</mat-label>
                    <input matInput formControlName="vehicle_number" maxlength="10"
                        style="text-transform: uppercase;">
                    <mat-icon matPrefix> directions_car</mat-icon>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Referral Name </mat-label>
                    <mat-select formControlName="refer_to">
                        <mat-option *ngFor="let data of referralname" [value]="data.referValue">
                            {{data.referValue}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <!-- Visiting From -->
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Visiting From</mat-label>
                    <input matInput formControlName="visiting_from">
                    <mat-icon matPrefix>call_received</mat-icon>
                    <mat-error *ngIf="visitorform.controls['visiting_from'].invalid ">
                        <div *ngIf="visitorform.controls['visiting_from'].errors?.required">
                            Visiting from is required
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Description</mat-label>
                    <textarea matInput formControlName="Comment" cdkTextareaAutosize
                        cdkAutosizeMinRows="2" cdkAutosizeMaxRows="5">
                </textarea>
                </mat-form-field>
            </div>
        </mat-grid-tile>
    </mat-grid-list>
    <div>
        <button mat-raised-button class="buttonRow" type="submit">Submit</button>
    </div>
</ng-container>

<ng-container *ngIf="Organizer">
    <mat-grid-list cols="2" rowHeight="470px">
        <mat-grid-tile>
            <div class="bothsidewith">
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Contact Person </mat-label>
                    <input matInput formControlName="visitor_name"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['visitor_name'].invalid ">
                        <div *ngIf="visitorform.controls['visitor_name'].errors?.required">
                            Contact Person Name Is Required
                        </div>
                        <div *ngIf="visitorform.controls['visitor_name'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Company Name </mat-label>
                    <input matInput formControlName="CompanyName"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['CompanyName'].invalid ">
                        <div *ngIf="visitorform.controls['CompanyName'].errors?.required">
                            Company Name Is Required
                        </div>
                        <div *ngIf="visitorform.controls['CompanyName'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Event Type </mat-label>
                    <input matInput formControlName="EventType"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['EventType'].invalid ">
                        <div *ngIf="visitorform.controls['EventType'].errors?.required">
                            Event Type Is Required
                        </div>
                        <div *ngIf="visitorform.controls['EventType'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Role </mat-label>
                    <input matInput formControlName="Role"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['Role'].invalid ">
                        <div *ngIf="visitorform.controls['Role'].errors?.required">
                            Role Is Required
                        </div>
                        <div *ngIf="visitorform.controls['Role'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
             
                  <div formArrayName="members" class="addmoreformcontrols">
                <div>
                    <input type="button" (click)="newtext()"
                            class="btn btn-primary" value="Add More Members"/>
                </div>
                <div >
                    <div *ngFor="let quantity of members().controls; let i=index"
                    [formGroupName]="i">
                    <div>
                        <mat-form-field appearance="fill" color="primary">
                            <mat-label> Member Name </mat-label>
                            <input matInput type="text" matInput
                                formControlName="membername">
                        </mat-form-field>
                    </div>
                    <div>
                        <button (click)="remove(i)" class="btn btn-danger">Remove</button>
                    </div>
                </div>

                </div>
                
            </div>
            </div>
        </mat-grid-tile>
        <mat-grid-tile>
            
            <div class="eventbothsidewithright">
             
               
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Phone Number </mat-label>
                    <input matInput type="number" formControlName="mobile" maxlength="10">
                    <span matPrefix>+91 </span>
                    <br>
                    <mat-error *ngIf="visitorform.controls['mobile'].invalid ">
                        <div *ngIf="visitorform.controls['mobile'].errors?.required">
                            Phone Number is required
                        </div>
                        <div *ngIf="visitorform.controls['mobile'].errors?.pattern">
                            Phone Number is invalid
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Vehicle Number</mat-label>
                    <input matInput formControlName="vehicle_number" maxlength="10"
                        style="text-transform: uppercase;">
                    <mat-icon matPrefix> directions_car</mat-icon>
                </mat-form-field>
                <mat-form-field appearance="fill" class="example-form-field">
                    <mat-label>From-To (Date)</mat-label>
                    <mat-date-range-input [rangePicker]="rangePicker">
                        <input matStartDate formControlName="FromDate" placeholder="Start date">
                        <input matEndDate formControlName="ToDate" placeholder="End date">
                    </mat-date-range-input>
                    <mat-datepicker-toggle matSuffix [for]="rangePicker"></mat-datepicker-toggle>
                    <mat-date-range-picker #rangePicker>
                        <mat-date-range-picker-actions>
                            <button mat-button matDateRangePickerCancel>Cancel</button>
                            <button mat-raised-button color="primary"
                                matDateRangePickerApply>Apply</button>
                        </mat-date-range-picker-actions>
                    </mat-date-range-picker>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Description</mat-label>
                    <textarea matInput formControlName="Comment" cdkTextareaAutosize
                        cdkAutosizeMinRows="2" cdkAutosizeMaxRows="5">
                </textarea>
                </mat-form-field>
                <br>
            </div>
          

        </mat-grid-tile>
    </mat-grid-list>
    <div>
        <button mat-raised-button class="buttonRow" type="submit">Submit</button>
    </div>

</ng-container>




<ng-container *ngIf="Labourer">
    <mat-grid-list cols="2" rowHeight="470px">
        <mat-grid-tile>
            <div class="bothsidewith">
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Contact Person </mat-label>
                    <input matInput formControlName="visitor_name"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['visitor_name'].invalid ">
                        <div *ngIf="visitorform.controls['visitor_name'].errors?.required">
                            Contact Person Name Is Required
                        </div>
                        <div *ngIf="visitorform.controls['visitor_name'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Company Name </mat-label>
                    <input matInput formControlName="CompanyName"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['CompanyName'].invalid ">
                        <div *ngIf="visitorform.controls['CompanyName'].errors?.required">
                            Company Name Is Required
                        </div>
                        <div *ngIf="visitorform.controls['CompanyName'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Role </mat-label>
                    <input matInput formControlName="Role"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['Role'].invalid ">
                        <div *ngIf="visitorform.controls['Role'].errors?.required">
                            Role Is Required
                        </div>
                        <div *ngIf="visitorform.controls['Role'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Event Type </mat-label>
                    <input matInput formControlName="EventType"
                        (keypress)="letterOnly($event)">
                    <mat-icon matPrefix>account_circle</mat-icon>
                    <mat-error *ngIf="visitorform.controls['EventType'].invalid ">
                        <div *ngIf="visitorform.controls['EventType'].errors?.required">
                            Event Type Is Required
                        </div>
                        <div *ngIf="visitorform.controls['EventType'].errors?.pattern">
                            {{characterspattern}}
                        </div>
                    </mat-error>
                </mat-form-field>
                
                <div formArrayName="members" class="addmoreformcontrols">
                    <div>

                        <div>
                            <input type="button" (click)="newtext()"
                                    class="btn btn-primary" value="Add More Members"/>
                        </div>
                    </div>
                    <div *ngFor="let quantity of members().controls; let i=index"
                        [formGroupName]="i">
                        <div>
                            <mat-form-field appearance="fill" color="primary">
                                <mat-label> Member Name </mat-label>

                                <input matInput type="text" matInput
                                    formControlName="membername">
                            </mat-form-field>

                        </div>
                        <div>
                            <button (click)="remove(i)" class="btn btn-danger">Remove</button>
                        </div>
                    </div>
                </div>

            </div>
        </mat-grid-tile>
        <mat-grid-tile>
            
            <div class="labbothsidewithright">
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Phone Number </mat-label>
                    <input matInput type="number" formControlName="mobile" maxlength="10">
                    <span matPrefix>+91 </span>
                    <br>
                    <mat-error *ngIf="visitorform.controls['mobile'].invalid ">
                        <div *ngIf="visitorform.controls['mobile'].errors?.required">
                            Phone Number is required
                        </div>
                        <div *ngIf="visitorform.controls['mobile'].errors?.pattern">
                            Phone Number is invalid
                        </div>
                    </mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Vehicle Number</mat-label>
                    <input matInput formControlName="vehicle_number" maxlength="10"
                        style="text-transform: uppercase;">
                    <mat-icon matPrefix> directions_car</mat-icon>
                </mat-form-field>
                <mat-form-field appearance="fill" class="example-form-field">
                    <mat-label>From-To (Date)</mat-label>
                    <mat-date-range-input [rangePicker]="rangePicker">
                        <input matStartDate formControlName="FromDate" placeholder="Start date">
                        <input matEndDate formControlName="ToDate" placeholder="End date">
                    </mat-date-range-input>
                    <mat-datepicker-toggle matSuffix [for]="rangePicker"></mat-datepicker-toggle>
                    <mat-date-range-picker #rangePicker>
                        <mat-date-range-picker-actions>
                            <button mat-button matDateRangePickerCancel>Cancel</button>
                            <button mat-raised-button color="primary"
                                matDateRangePickerApply>Apply</button>
                        </mat-date-range-picker-actions>
                    </mat-date-range-picker>
                </mat-form-field>
                <mat-form-field appearance="fill" color="primary">
                    <mat-label>Description</mat-label>
                    <textarea matInput formControlName="Comment" cdkTextareaAutosize
                        cdkAutosizeMinRows="2" cdkAutosizeMaxRows="5">
                </textarea>
                </mat-form-field>
                
              
            </div>

        </mat-grid-tile>
        
    </mat-grid-list>
    <div>
        <button mat-raised-button class="buttonRow" type="submit">Submit</button>
    </div>
</ng-container>











                        <!-- <mat-grid-list cols="2" rowHeight="470px">
                            <mat-grid-tile>
                                <div class="bothsidewith">


                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Visitor Name </mat-label>
                                        <input matInput formControlName="visitor_name" (keypress)="letterOnly($event)">
                                        <mat-icon matPrefix>account_circle</mat-icon>
                                        <mat-error *ngIf="visitorform.controls['visitor_name'].invalid ">
                                            <div *ngIf="visitorform.controls['visitor_name'].errors?.required">
                                                Visitor name is required
                                            </div>
                                            <div *ngIf="visitorform.controls['visitor_name'].errors?.pattern">
                                                {{characterspattern}}
                                            </div>
                                        </mat-error>
                                    </mat-form-field>

                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Phone Number </mat-label>
                                        <input matInput type="number" formControlName="mobile" maxlength="10">
                                        <span matPrefix>+91 </span>
                                        <br>
                                        <mat-error *ngIf="visitorform.controls['mobile'].invalid ">
                                            <div *ngIf="visitorform.controls['mobile'].errors?.required">
                                                Phone Number is required
                                            </div>
                                            <div *ngIf="visitorform.controls['mobile'].errors?.pattern">
                                                Phone Number is invalid
                                            </div>

                                        </mat-error>
                                    </mat-form-field>
                                  
                                    <ng-container *ngIf="shown">
                                        <mat-form-field appearance="fill" color="primary">
                                            <mat-label> Members </mat-label>

                                            <input matInput type="number" formControlName="memberscount">

                                            <mat-icon matPrefix>account_box</mat-icon>
                                            <mat-error *ngIf="visitorform.controls['memberscount'].invalid ">
                                                <div *ngIf="visitorform.controls['memberscount'].errors?.required">
                                                    Members is required
                                                </div>

                                            </mat-error>
                                        </mat-form-field>
                                    </ng-container>


                                    <ng-container *ngIf="show">
                                        <div formArrayName="members">
                                            <div>

                                                <div width="150px"><button type="button" (click)="newtext()"
                                                        class="btn btn-primary">Add More</button></div>
                                            </div>
                                            <div *ngFor="let quantity of members().controls; let i=index"
                                                [formGroupName]="i">
                                                <div>
                                                    <mat-form-field appearance="fill" color="primary">
                                                        <mat-label> Member Name </mat-label>

                                                        <input matInput type="text" matInput
                                                            formControlName="membername">
                                                    </mat-form-field>

                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>





                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Vehicle Number</mat-label>
                                        <input matInput formControlName="vehicle_number" maxlength="10"
                                            style="text-transform: uppercase;">
                                        <mat-icon matPrefix> directions_car</mat-icon>

                                    </mat-form-field>
                                


                                </div>



                            </mat-grid-tile>
                            <mat-grid-tile>


                                <div class="bothsidewithright">

                                   
                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Visit Date</mat-label>
                                        <input matInput [matDatepicker]="picker" [min]="minDate" (click)="picker.open()"
                                            formControlName="visit_date">
                                        <mat-datepicker-toggle matPrefix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                    </mat-form-field>


                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Visit Time</mat-label>
                                        <input matInput [ngxTimepicker]="toggleTimepicker1" [format]="12"
                                            [min]="currentTime" (ngModelChange)="selectInTime($event)"
                                            formControlName="visit_time" required>

                                        <mat-icon matSuffix>
                                            <ngx-material-timepicker-toggle [for]="toggleTimepicker1">
                                            </ngx-material-timepicker-toggle>
                                            <ngx-material-timepicker #toggleTimepicker1></ngx-material-timepicker>
                                        </mat-icon>
                                    </mat-form-field>
                                   

                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Referral Name </mat-label>
                                        <mat-select formControlName="refer_to">
                                            <mat-option *ngFor="let data of referralname" [value]="data.referValue">
                                                {{data.referValue}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                   
                                    <mat-form-field appearance="fill" class="example-form-field">
                                        <mat-label>From-To (Date)</mat-label>
                                        <mat-date-range-input [rangePicker]="rangePicker">
                                            <input matStartDate formControlName="FromDate" placeholder="Start date">
                                            <input matEndDate formControlName="ToDate" placeholder="End date">
                                        </mat-date-range-input>
                                        <mat-datepicker-toggle matSuffix [for]="rangePicker"></mat-datepicker-toggle>
                                        <mat-date-range-picker #rangePicker>
                                            <mat-date-range-picker-actions>
                                                <button mat-button matDateRangePickerCancel>Cancel</button>
                                                <button mat-raised-button color="primary"
                                                    matDateRangePickerApply>Apply</button>
                                            </mat-date-range-picker-actions>
                                        </mat-date-range-picker>
                                    </mat-form-field>

                                  
                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Visiting From</mat-label>
                                        <input matInput formControlName="visiting_from">
                                        <mat-icon matPrefix>call_received</mat-icon>
                                        <mat-error *ngIf="visitorform.controls['visiting_from'].invalid ">
                                            <div *ngIf="visitorform.controls['visiting_from'].errors?.required">
                                                Visiting from is required
                                            </div>
                                        </mat-error>

                                    </mat-form-field>
                                    <mat-form-field appearance="fill" color="primary">
                                        <mat-label>Description</mat-label>
                                        <textarea matInput formControlName="Comment" cdkTextareaAutosize
                                            cdkAutosizeMinRows="2" cdkAutosizeMaxRows="5">
                                        </textarea>

                                    </mat-form-field>





                                    <section class="example-section">
                                        <mat-checkbox class="example-margin" color="primary">Is Physical Pass necessary?
                                        </mat-checkbox>

                                    </section>
                                    <br>
                                </div>


                            </mat-grid-tile>



                        </mat-grid-list> -->
                       
                       
                    </form>
                </div>
            </div>
        </mat-tab>
    </mat-tab-group>
</div>